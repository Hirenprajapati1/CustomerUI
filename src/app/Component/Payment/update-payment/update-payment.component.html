<div class="row">
    <div class="col-md-6 col-sm-offset-3">
        <mat-card>
            <form [formGroup]="form" >
                <h1 class="text-center"><mat-label >Update Payment</mat-label></h1>   

                <mat-form-field  appearance="fill"class=" example-full-width1 ">
                    <mat-label><span class="req">* </span> Payment No</mat-label>        
                    <input matInput  
                    type="text" 
                    [(ngModel)]="pay.paymentNo" readonly
                     name="paymentNo" id="txt"
                    placeholder="Enter Payment No"
                    formControlName="paymentNo"
                    > 
                     <span matPrefix></span>      
                </mat-form-field>

                    <mat-form-field appearance="fill" class=" example-full-width1 ">
                        <mat-select  name="customerNo" [(ngModel)]="CustNo[0].customerNo" 
                        formControlName="customerNo">
                          <mat-option disabled >Select Customer</mat-option>
                          <mat-option 
                          *ngFor="let cust of Customer1" 
                          [ngValue]='CustNo[0].customerNo'
                          (click)="GetInvoiceNoByCustomerNo()"
                           value="{{cust.customerNo }}">
                           {{cust.customerName}}   &nbsp; &nbsp;  ({{cust.customerNo}})</mat-option>
                        </mat-select>
                        <mat-label><span class="req">* </span> Customer</mat-label>
                      </mat-form-field>     
                
                      <div>
                        <mat-form-field appearance="fill" class=" example-full-width1">
                            <mat-select  [(ngModel)]="pay.invoiceNo"
                             name="InvoiceNo"
                             formControlName="invoiceNo"
                             [ngClass]="{'is-invalid': (form.get('invoiceNo')
                            .touched && form.get('invoiceNo').invalid ) }"
                            >
                              <mat-option  disabled>Select Invoice No </mat-option>
                              <mat-option
                              *ngFor="let inv of Invoice2"           
                              [ngValue]='inv.invoiceNo'
                              (click)="GetInvoiceDetailsByNo()" 
                              value="{{inv.invoiceNo}}">
                              {{inv.invoiceNo}}</mat-option>
                            </mat-select>
                            <mat-label><span class="req">* </span> Invoice No</mat-label>
                            <mat-error >
                                Invoice No is required 
                            </mat-error>
              
                            </mat-form-field>
                        </div> 
    
        
                <div *ngIf="show1"  class=" example-full-width1 " >
                      <mat-card [ngStyle]="{'background-color':' rgb(232, 240, 243)'}">
                        <table  class=" example-full-width1 " >
                            <thead>
                                <tr>
                                    <td>Invoice No</td><td>:</td><td>{{Invoice[0].invoiceNo}}</td>
                                </tr>
                                <tr>
                                    <td>Invoice Date</td><td>:</td><td>{{Invoice[0].invoiceDate | date :"dd-MMM-yy"}}</td>
                                </tr>
                                <tr>
                                    <td>Invoice Amount</td><td>:</td><td>{{Invoice[0].invoiceAmount | currency}}</td>
                                </tr>
                                <tr>
                                    <td>Payment Amount</td><td>:</td><td>{{Invoice[0].paymentAmount | currency}}</td>
                                </tr>
                                <tr *ngIf="(Invoice[0].invoiceAmount - Invoice[0].paymentAmount) >= 0;else second">
                                    <td>Payment Due Amount</td><td>:</td><td>{{Invoice[0].invoiceAmount - Invoice[0].paymentAmount | currency}}</td>
                                </tr>
                                
                                <ng-template #second>
                                    <td> Extra given Payment Amount</td><td>:</td><td>{{-(Invoice[0].invoiceAmount - Invoice[0].paymentAmount) | currency}}</td>
                                </ng-template>
  
                                <tr>
                                    <td>Payment Due Date:</td><td>:</td><td>{{Invoice[0].paymentDueDate | date :"dd-MMM-yy"}}</td>
                                </tr>
                             
                            </thead>
                        </table>
                    </mat-card>
                    </div>
         


     <mat-form-field  appearance="fill" class="example-full-width1">
        <mat-label><span class="req">* </span>Payment Amount</mat-label>
            <input matInput type="number" min="1" step="any"
            [(ngModel)]="pay.paymentAmount" name="paymentAmount"
            id="paymentAmount"
            placeholder="Enter Payment Amount"             
            formControlName="paymentAmount"
            [ngClass]="{'is-invalid': form.get('paymentAmount')
           .touched && form.get('paymentAmount').invalid}"
            >

            <mat-error *ngIf="form.get('paymentAmount').touched && form.get('paymentAmount').invalid"  class="invalid-feedback">
                <div *ngIf="form.get('paymentAmount').errors.required">Payment Amount is required.</div>
                <div *ngIf="form.get('paymentAmount').errors.pattern">Amount Should be the positive value.</div>
            </mat-error>

       </mat-form-field>

       <div *ngIf="show1 && (pay.paymentAmount) > 0"  class=" example-full-width1 " >
        <mat-card [ngStyle]="{'background-color':' rgb(232, 240, 243)'}">
          <table  class=" example-full-width1 " >
              <thead>
                  <tr *ngIf="(Invoice[0].invoiceAmount - Invoice[0].paymentAmount )- pay.paymentAmount >= 0;else second">
                      <td>Payment Due Amount</td><td>:</td><td>{{(Invoice[0].invoiceAmount - Invoice[0].paymentAmount )- pay.paymentAmount | currency}}</td>
                  </tr>
                  
                  <ng-template #second>
                      <td> Extra given Payment Amount</td><td>:</td><td>{{-((Invoice[0].invoiceAmount - Invoice[0].paymentAmount )-  pay.paymentAmount) | currency}}</td>
                  </ng-template>
                        
              </thead>
          </table>
      </mat-card>
      </div>


                <mat-form-field   appearance="fill"class="example-full-width1">
                    <mat-label><span class="req">* </span>Payment Date</mat-label>
                        <input matInput type="date"
                        [(ngModel)]="pay.paymentDate" 
                        [ngModel]="pay.paymentDate | date:'yyyy-MM-dd'"
                        name="paymentDate" id="txt"
                        placeholder="Enter Payment Date"             
                        formControlName="paymentDate"
                        [ngClass]="{'is-invalid': form.get('paymentDate')
                       .touched && form.get('paymentDate').invalid}"
                        >      
                   <mat-error>
                    Payment Date is required 
                    </mat-error>
           
                   </mat-form-field>

   

                  <div  class=" btn-group " style="padding-left:10% ;">
                    <input class="btn btn-success" [disabled]="!form.valid" type="submit" name="submit_reg" value="Submit" 
                    (click)="UpdatePayment()">
                    <input (click)="gotoList()" class = "btn btn-warning"routerLink="/GetEmployeePath"type="button" value="Goto List">            
                </div>
                
            <router-outlet></router-outlet>
        </form><!-- ends register form -->
        </mat-card>
        <!-- <span class="req">Note : If You Not Select Date Then it Take Current Date </span> -->

    </div><!-- ends col-12 -->
</div>
